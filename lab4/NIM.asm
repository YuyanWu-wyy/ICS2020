.ORIG x3000
INFO1 .STRINGZ "ROW A:"
INFO2 .STRINGZ "ROW B:"
INFO3 .STRINGZ "ROW C:"
INFO4 .STRINGZ "o"
INFO5 .STRINGZ "Player 1, choose a row and number of rocks:"
A .STRINGZ "A"
B .STRINGZ "B"
C .STRINGZ "C"
ZERO .STRINGZ "0"
SPACE .FILL x000A
NONE .FILL x0000

AND R0,R0,#0
AND R1,R1,#0;记录A的剩余个数
AND R2,R2,#0;记录B的剩余个数
AND R3,R3,#0;记录C的剩余个数
AND R4,R4,#0;COUNTER
AND R5,R5,#0;记录player的选择排数
AND R6,R6,#0;记录player的选择个数
ADD R1,R1,#3
ADD R2,R2,#5
ADD R3,R3,#8

BRnzp ROUND1
PRINT1:

LEA R0,INFO1
PUTS
AND R4,R4,#0
ADD R4,R4,R1
LOOP1: 
ADD R4,R4,#0
BRz NEXT1
LEA R0,INFO4
PUTS
ADD R4,R4,#-1
BRp LOOP1
NEXT1:
LEA R0,SPACE
PUTS

LEA R0,INFO2
PUTS
AND R4,R4,#0
ADD R4,R4,R2
LOOP2: 
ADD R4,R4,#0
BRz NEXT2
LEA R0,INFO4
PUTS
ADD R4,R4,#-1
BRp LOOP2
NEXT2:
LEA R0,SPACE
PUTS

LEA R0,INFO3
PUTS
AND R4,R4,#0
ADD R4,R4,R3
LOOP3: 
ADD R4,R4,#0
BRz NEXT3
LEA R0,INFO4
PUTS
ADD R4,R4,#-1
BRp LOOP3
NEXT3:
LEA R0,SPACE
PUTS

BRnzp ROUND1AGAIN

PRINT2:

LEA R0,INFO1
PUTS
AND R4,R4,#0
ADD R4,R4,R1
LOOP4: 
ADD R4,R4,#0
BRz NEXT4
LEA R0,INFO4
PUTS
ADD R4,R4,#-1
BRp LOOP4
NEXT4:
LEA R0,SPACE
PUTS

LEA R0,INFO2
PUTS
AND R4,R4,#0
ADD R4,R4,R2
LOOP5: 
ADD R4,R4,#0
BRz NEXT5
LEA R0,INFO4
PUTS
ADD R4,R4,#-1
BRp LOOP5
NEXT5:
LEA R0,SPACE
PUTS

LEA R0,INFO3
PUTS
AND R4,R4,#0
ADD R4,R4,R3
LOOP6: 
ADD R4,R4,#0
BRz NEXT6
LEA R0,INFO4
PUTS
ADD R4,R4,#-1
BRp LOOP6
NEXT6:
LEA R0,SPACE
PUTS

BRnzp ROUND2AGAIN

ROUND1:
BRnzp PRINT1
ROUND1AGAIN:
LEA R0,INFO5
PUTS
GETC
OUT
AND R5,R5,#0
ADD R5,R0,#0
GETC
OUT
AND R6,R6,#0
ADD R6,R0,#0
LEA R0,SPACE
PUTS
AND R4,R4,#0
LD R4,ZERO
NOT R4,R4
ADD R4,R4,#1
ADD R6,R6,R4

JUDGE1:
AND R4,R4,#0
LD R4,A
NOT R4,R4
ADD R4,R4,#1
ADD R4,R4,R5
BRz ROWA
AND R4,R4,#0
LD R4,B
NOT R4,R4
ADD R4,R4,#1
ADD R4,R4,R5
BRz ROWB
AND R4,R4,#0
LD R4,C
NOT R4,R4
ADD R4,R4,#1
ADD R4,R4,R5
BRz ROWC
BRnzp ERROR1

ROWA:
AND R4,R4,#0
NOT R4,R6
ADD R4,R4,#1
ADD R4,R4,R1
BRn ERROR1
ADD R1,R4,#0
LEA R0,SPACE
PUTS
BRnzp JUDGEWIN1
F1:
BRnzp ROUND2

ROWB:
AND R4,R4,#0
NOT R4,R6
ADD R4,R4,#1
ADD R4,R4,R2
BRn ERROR1
ADD R2,R4,#0
LEA R0,SPACE
PUTS
BRnzp JUDGEWIN2
F2:
BRnzp ROUND2

ROWC:
AND R4,R4,#0
NOT R4,R6
ADD R4,R4,#1
ADD R4,R4,R3
BRn ERROR1
ADD R3,R4,#0
LEA R0,SPACE
PUTS
BRnzp JUDGEWIN3
F3:
BRnzp ROUND2

ROWA2:
AND R4,R4,#0
NOT R4,R6
ADD R4,R4,#1
ADD R4,R4,R1
BRn ERROR2
ADD R1,R4,#0
LEA R0,SPACE
PUTS
BRnzp JUDGEWIN4
F4:
BRnzp ROUND1

ROWB2:
AND R4,R4,#0
NOT R4,R6
ADD R4,R4,#1
ADD R4,R4,R2
BRn ERROR2
ADD R2,R4,#0
LEA R0,SPACE
PUTS
BRnzp JUDGEWIN5
F5:
BRnzp ROUND1

ROWC2:
AND R4,R4,#0
NOT R4,R6
ADD R4,R4,#1
ADD R4,R4,R3
BRn ERROR2
ADD R3,R4,#0
LEA R0,SPACE
PUTS
BRnzp JUDGEWIN6
F6:
BRnzp ROUND1

ROUND2:
BRnzp PRINT2
ROUND2AGAIN:
LEA R0,INFO6
PUTS
GETC
OUT
AND R5,R5,#0
ADD R5,R0,#0
GETC
OUT
AND R6,R6,#0
ADD R6,R0,#0
LEA R0,SPACE
PUTS
AND R4,R4,#0
LD R4,ZERO
NOT R4,R4
ADD R4,R4,#1
ADD R6,R6,R4

JUDGE2:
AND R4,R4,#0
LD R4,A
NOT R4,R4
ADD R4,R4,#1
ADD R4,R4,R5
BRz ROWA2
AND R4,R4,#0
LD R4,B
NOT R4,R4
ADD R4,R4,#1
ADD R4,R4,R5
BRz ROWB2
AND R4,R4,#0
LD R4,C
NOT R4,R4
ADD R4,R4,#1
ADD R4,R4,R5
BRz ROWC2
BRnzp ERROR2


ERROR1:
LEA R0,INFO7
PUTS
LEA R0,SPACE
PUTS
BRnzp ROUND1AGAIN

ERROR2:
LEA R0,INFO7
PUTS
LEA R0,SPACE
PUTS
BRnzp ROUND2AGAIN

JUDGEWIN1:
ADD R1,R1,#0
BRnp F1
ADD R2,R2,#0
BRnp F1
ADD R3,R3,#0
BRnp F1
LEA R0,INFO9
PUTS
HALT

JUDGEWIN2:
ADD R1,R1,#0
BRnp F2
ADD R2,R2,#0
BRnp F2
ADD R3,R3,#0
BRnp F2
LEA R0,INFO9
PUTS
HALT

JUDGEWIN3:
ADD R1,R1,#0
BRnp F3
ADD R2,R2,#0
BRnp F3
ADD R3,R3,#0
BRnp F3
LEA R0,INFO9
PUTS
HALT

JUDGEWIN4:
ADD R1,R1,#0
BRnp F4
ADD R2,R2,#0
BRnp F4
ADD R3,R3,#0
BRnp F4
LEA R0,INFO8
PUTS
HALT

JUDGEWIN5:
ADD R1,R1,#0
BRnp F5
ADD R2,R2,#0
BRnp F5
ADD R3,R3,#0
BRnp F5
LEA R0,INFO8
PUTS
HALT

JUDGEWIN6:
ADD R1,R1,#0
BRnp F6
ADD R2,R2,#0
BRnp F6
ADD R3,R3,#0
BRnp F6
LEA R0,INFO8
PUTS
HALT
INFO6 .STRINGZ "Player 2, choose a row and number of rocks:"
INFO7 .STRINGZ "Invalid move. Try again."
INFO8 .STRINGZ "Player 1 Wins."
INFO9 .STRINGZ "Player 2 Wins"



SAVER7 .BLKW #1
.END